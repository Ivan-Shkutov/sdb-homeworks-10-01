# Домашнее задание к занятию «Базы данных, их типы»


## Шкутов Иван Владимирович


### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

---

## ОТВЕТ:

### 1.1. Бюджетирование проектов

Для задач бюджетирования проектов и формирования финансовых аналитических отчетов лучше всего подходят реляционные СУБД (PostgreSQL или MySQL). Они обеспечивают:
1.	Целостность данных: поддерживают транзакции и ограничения целостности.
2.	Структурированность: данные хранятся в таблицах с четко определенной схемой.

   
### 1.1.* Ускорение хеширования

Если хеширование занимает много времени, можно рассмотреть использование API, таких как OpenSSL или Bcrypt, которые оптимизированы для быстрой криптографической обработки и могут ускорить выполнение соответствующих расчетов.


### 1.2. Лендинги и CRM

Для лендингов и CRM лучше подходят NoSQL СУБД (MongoDB или Couchbase), так как у них есть:
1.	Гибкость: позволяют легко добавлять новые поля в документы.
2.	Быстродействие: чаще всего обеспечивают более высокую производительность при работе с большими объемами данных.

   
### 1.2.* Использование одной СУБД

Да, можно использовать одну NoSQL СУБД, такую как MongoDB, которая может эффективно работать как с лендингами, так и с CRM, обеспечивая гибкость в обработке данных.


### 1.3. База норм и правил контроля качества

Для этой задачи также подойдут реляционные СУБД, так как необходимо создать четкую и простую структуру для хранения данных о правилах и обучающих материалах (PostgreSQL или MySQL).


### 1.3.* Использование существующей СУБД

Да, можно использовать одну из реляционных СУБД (PostgreSQL) для контроля качества. Лучше создать дополнительные таблицы, связанные с корпоративными нормами и правилами.


### 1.4. Логика и маршруты доставки

Для задач логистики, где важно быстро формировать маршруты, лучше всего подойдут реляционные СУБД. Они помогут эффективно работать со связями между объектами, такими как курьеры и маршруты.


### 1.4.* Подключение отдела закупок

Да, возможно подключить отдел закупок к той же реляционной СУБД. Это обеспечит более упрощенный доступ к данным между логистикой и закупками, а наличие одной системы упростит администрирование.


### 1.5. Использование одной СУБД для всех задач

В принципе, можно использовать одну реляционную СУБД, такую как PostgreSQL, для всех задач. Она достаточно гибкая и может справиться как с бюджетированием, так и с контролем качества, логистикой и другими аспектами бизнеса. Однако важно учитывать возможные ограничения в производительности и гибкости при большом объеме данных и разнообразии типов задач.


##  ВЫВОД:

Выбор СУБД зависит от специфики и структуры данных, которые необходимо обрабатывать. В целом, реляционные СУБД, такие как PostgreSQL, могут покрыть большинство задач, однако для более гибких решений, таких как лендинги и CRM, стоит рассмотреть использование NoSQL баз, таких как MongoDB.

---


### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

---

## ОТВЕТ:


##  2.1. Транзакции при пополнении баланса телефона

1.	Начало транзакции
   
система фиксирует начало операции (например, BEGIN TRANSACTION в SQL)

2.	Проверка данных плательщика
   
валидация номера телефона, суммы, реквизитов платежа (карта/кошелёк в аккаунте)

3.	Списание средств с источника
   
если оплата картой - запрос к платежному аппарату (банковский API)

если с электронного кошелька - уменьшение баланса кошелька на необходимую сумму

4.	Зачисление средств на счёт телефона
   
обновление баланса в базе оператора

5.	Фиксация транзакции (Commit)
    
если все шаги успешны - подтверждение (COMMIT), данные сохраняются

6.	Уведомление пользователя
    
отправка SMS/email-подтверждения о пополнении


##  2.1.* Пополнение через автоплатёж*

1.	Проверка расписания
   
система проверяет, что наступила дата/время автоплатежа

2.	Авторизация плательщика
   
проверка сохранённых реквизитов (например, токена карты) без ввода данных

3.	Обработка ошибок (если недостаточно средств)
   
если списание не удалось - уведомление пользователя и повторная попытка через определенное количество дней

4.	Логирование результата
   
запись в историю автоплатежей (успех/неудача + причина)

##  Главные отличия:

1.	Нет ручного ввода данных (всё автоматизировано)
   
2.	Добавляется механизм отложенных повторных попыток при ошибках
   
3.	Обязательно ведение лога для отчётности


##  ВЫВОД:

1.	Обычное пополнение требует явных действий пользователя
   
2.	Автоплатёж добавляет автоматизацию, но требует обработки ошибок и логов
	
3.	В обоих случаях важна атомарность (либо всё выполняется, либо откатывается)
 




---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

---

## ОТВЕТ:


## 3.1. Преимущества SQL-систем по отношению к NoSQL:

### 1.	Структурированность данных:
   
SQL-системы используют строгое определение схемы. Это позволяет поддерживать целостность данных и более эффективно обрабатывать запросы, поскольку структура данных заранее известна.

### 2.	Поддержка ACID-транзакций:
   
SQL-базы данных обеспечивают свойства ACID (Atomicity, Consistency, Isolation, Durability), что гарантирует высокую надежность и согласованность данных при выполнении транзакций.

### 3.	Мощные возможности для запросов:
   
SQL использует язык запросов, который позволяет выполнять сложные запросы с объединениями, агрегированием и фильтрацией данных, что предоставляет гибкие возможности анализа и обработки данных.

### 4.	Стандартная реализация:
   
SQL является стандартом в мире баз данных, что делает его универсальным и широко применяемым языком. Это облегчает обучение и облегчает работу разработчиков и администраторов.

### 5.	Оптимизация и производительность:
    
SQL-системы хорошо оптимизированы для реализации различных типов запросов с использованием индексов и структур хранения данных, что может обеспечивать высокую производительность на больших объемах данных.


## 3.1. * Преимущества NewSQL систем перед SQL и NoSQL

### 1.	Сочетание производительности и надежности:
   
NewSQL - системы объединяют преимущества реляционных баз данных с высокой производительностью и масштабируемостью, что позволяет им обрабатывать большие объемы транзакций и пользователей без потери целостности данных.

### 2.	Горизонтальная масштабируемость:
   
в отличие от традиционных SQL - систем, которые часто требуют вертикального масштабирования (увеличение мощности одного сервера), NewSQL - системы поддерживают горизонтальное масштабирование, позволяя добавлять новые узлы для увеличения емкости системы.

### 3.	Поддержка ACID-транзакций:
   
NewSQL обеспечивает свойства ACID, что делает его подходящим для критически важных приложений, требующих надежности и целостности данных, при этом сохраняет высокую производительность.

### 4.	Современные архитектуры:
    
NewSQL - системы часто строятся на современных распределённых архитектурах, что позволяет им более эффективно управлять ресурсами и обеспечивать более быструю обработку запросов при работе с большими данными.

### 5.	Гибридный подход:
    
некоторые NewSQL - системы комбинируют элементы SQL и NoSQL, предлагая возможность работы с гибкими структурами данных при сохранении всех преимуществ реляционной модели. Это позволяет разработчикам выбирать наиболее подходящий подход в зависимости от задач.


##  ВЫВОД:

SQL-системы обеспечивают структурированность, надежность и мощные возможности запросов, что делает их идеальными для многих критически важных приложений. NewSQL-системы, в свою очередь, предлагают лучшее из обоих миров, обеспечивая свойства реляционных баз данных, а также масштабируемость и производительность, характерные для NoSQL-систем.



---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

---

## ОТВЕТ:

### Критерии выбора типа СУБД:

### 1.	Тип данных:
   
какие данные будут обрабатываться (структурированные, полуструктурированные или неструктурированные). Если данные хорошо структурированы и требуют сложных запросов, реляционные СУБД (PostgreSQL, MySQL) могут оказаться эффективными. Если данные варьируются или меняются, может понадобиться NoSQL-система (MongoDB, Cassandra).

### 2.	Объем и частота запросов:
   
если ожидается высокая загрузка с большим количеством одновременных запросов, то стоит рассмотреть СУБД, поддерживающие горизонтальное масштабирование и возможность обработки больших потоков данных, такие как NewSQL.

### 3.	Требования к транзакциям:
   
если работа требует строгой согласованности данных и выполнения ACID - транзакций, реляционные базы данных будут лучшим выбором. В противоположном случае, если согласованность может быть ослаблена, то выбираем NoSQL.

### 4.	Скорость обработки и производительность:
   
СУБД, которые могут эффективно обрабатывать большие объемы данных и быстроту выполнения запросов. 

### 5.	Стоимость и ресурсы:
	
оценить лицензирование и стоимость эксплуатации выбранной СУБД.


### Модель распределённых вычислений:

для выполнения большого объема вычислений с использованием 1000 машин лучше всего подойдёт модель MapReduce или аналогичные технологии, такие как Apache Spark.

### Почему именно эта модель?

### 1.	Эффективность обработки больших данных:

MapReduce и Spark разработаны специально для распределенной обработки больших объемов данных. Они способны разбивать задачи на более мелкие части, которые могут быть выполнены параллельно, что значительно ускоряет вычисления.

### 2.	Гибкость и масштабируемость:

эти модели легко масштабируются – добавление или удаление машин не требует значительных усилий. Как объем данных увеличивается, можно просто добавить новые узлы к кластеру.

### 3.	Поддержка различных источников данных:

MарReduce и Spark могут работать с различными типами данных и интегрироваться с разнообразными СУБД, что позволяет эффективно извлекать и обрабатывать данные из разных источников.

### 4.	Поддержка сложных вычислений:

в отличие от традиционного MapReduce, Apache Spark поддерживает более сложные вычисления и алгоритмы, такие как машинное обучение и графовые вычисления, что делает его более подходящим для анализа данных.

##  ВЫВОД:

в выборе СУБД для данной архитектуры будет важен учет структуры обрабатываемых данных, объема запросов и требований к транзакциям. Использование модели MapReduce или Apache Spark позволит эффективно распределять вычислительные нагрузки по 1000 машинам, обеспечивая высокую производительность и масштабируемость для работы с огромным количеством данных.


---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
